<html>

<body>
  <button id="btn">generateBridgeInNervosTransaction</button>
  <div><input type="text" id="param1" value="" /></div>
  <div><input type="text" id="param2" value="" /></div>
  <div><input type="text" id="param3" value="" /></div>
  <div><input type="text" id="param4" value="" /></div>
  <div><input type="text" id="param5" value="" /></div>
  <div><input type="text" id="testType" value="" /></div>
  <div> value: <span id="ret"></span></div>
  </div>
</body>
<script>
  // import { goto } from './goto.js';
  document.getElementById("btn").addEventListener("click", () => {
    const param1 = document.getElementById("param1").value;
    const param2 = document.getElementById("param2").value;
    const param3 = document.getElementById("param3").value;
    const param4 = document.getElementById("param4").value;
    const param5 = document.getElementById("param5").value;
    const t_type = document.getElementById("testType").value;
    
     var url = 'http://127.0.0.1:3060/force-bridge/api/v1';
    // var url = 'https://testnet.forcebridge.com/api/force-bridge/api/v1';
    // var url = goto.urls.watcherLocal;
    var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
    xmlhttp.open("POST", url);
    xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    const p1 = "generateBridgeInNervosTransaction"; 
    const p2 = 1; 
    const p3 = {
    "asset": {
        "network": param1,
        "ident": param2,
        "amount": param3
    },
    "recipient": param4,
    "sender": param5
      };
    // 0: none params 1: common params to request 2: more params
    if (t_type === "0") {
      const p3 = {"asset": {
        "network": null,
        "ident": null,
        "amount": null
        },
      "recipient": null,
      "sender": null};
      } 
    if (t_type === "2") {
      p3.other = "other";
      }  
    xmlhttp.send(JSON.stringify({
      "jsonrpc": "2.0",
      "method": p1,
      "id": p2,
      "params": p3,
    }));
    console.log(JSON.stringify({
      "jsonrpc": "2.0",
      "method": p1,
      "id": p2,
      "params": p3,
    }));
    
    //监听事件
    xmlhttp.onreadystatechange = function () {
        if(xmlhttp.readyState === 4&&xmlhttp.status === 200)
        {
            console.log(xmlhttp.responseText);
            // document.getElementById("ret").innerHTML = JSON.stringify(xmlhttp.responseText);
            document.getElementById("ret").innerHTML = xmlhttp.responseText;
        }
        if (xmlhttp.status === 400) {
            console.log(xmlhttp.responseText)
            // document.getElementById("ret").innerHTML = JSON.stringify(xmlhttp.responseText);
            document.getElementById("ret").innerHTML = xmlhttp.responseText;
        }
    }
  });



</script>

</html>




<!-- 
{
  "jsonrpc": "2.0",
  "method": "generateBridgeInNervosTransaction",
  "params": {
    "asset": {
      "network": "Ethereum",
      "ident": "0x0000000000000000000000000000000000000000",
      "amount": "10000000000000"
    },
    "recipient": "ckt1qpvvtay34wndv9nckl8hah6fzzcltcqwcrx79apwp2a5lkd07fdxxqdh40tcffmuxpme0pzpxm4j72n8xf0zfps55h68c",
    "sender": "0xb7abd784a77c307797844136eb2f2a67325e2486"
  },
  "id": 1
}
 -->